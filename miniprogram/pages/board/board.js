import create from '../../utils/create'
import store from '../../store/index'

const db = wx.cloud.database()

create.Page(store, {
  /**
   * 页面的初始数据
   */
  data: {
    roomNumber: -1,
    shouldRoomMember: 9,
    roomMemberNow: [
      {
        openId: 676,
        avatarUrl:
          'data:image/jpeg;base64,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',
        nickName: 'test',
        itemName: '白狼王',
      },
    ],
    isRotate: false,
  },

  /**
   * 生命周期函数--监听页面加载
   */
  onLoad: function (options) {
    let { isAfterCreateRoom, roomNumber, shouldRoomMember } = options
    this.roomNumber = parseInt(roomNumber)
    shouldRoomMember = parseInt(shouldRoomMember)

    if (isAfterCreateRoom === '1') {
      this.setData({
        roomNumber,
        shouldRoomMember,
      })
    } else {
      // 法官再一次回到房间，取出之前进入房间时存在store里的数据
      const { roomNumber, memberNum, selectedRoomRolesNow } = this.store.data.roomInfo.targetRoom
      this.setData({
        roomNumber,
        roomMemberNow: selectedRoomRolesNow,
        shouldRoomMember: memberNum,
      })
    }
  },

  /**
   * 生命周期函数--监听页面初次渲染完成
   */
  onReady: function () {
    // 监听房间人数变化
    if (this.data.roomMemberNow.length !== this.data.shouldRoomMember) {
      const rn = this.store.data.roomInfo.targetRoom?.roomNumber || this.roomNumber

      this.watcher = db
        .collection('room')
        .where({
          roomNumber: rn,
        })
        .watch({
          onChange: snapshot => {
            this.getRoomInfoByRoomNumber(rn)
          },
          onError: err => {
            console.error('the watch closed because of error', err)
          },
        })
    }
  },

  /**
   * 生命周期函数--监听页面卸载
   */
  onUnload: function () {
    this.watcher && this.watcher.close()
  },

  async getRoomInfoByRoomNumber(roomNumber) {
    try {
      const roomInfo = await db
        .collection('room')
        .where({
          roomNumber,
        })
        .get()
      const { selectedRoomRolesNow } = roomInfo.data[0]
      this.setData({
        roomMemberNow: selectedRoomRolesNow,
      })
    } catch (error) {
      console.log(error)
    }
  },

  // 点击固定悬浮时
  onClickHelp() {
    console.log(1)
    wx.lin.showActionSheet({
      itemList: [
        {
          name: '今日不再出现此类内容',
        },
        {
          name: '屏蔽',
        },
      ],
    })
  },
  toggleRotate() {
    this.setData({
      isRotate: !this.data.isRotate,
    })
  },
})
